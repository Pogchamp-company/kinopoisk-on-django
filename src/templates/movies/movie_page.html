{% extends "base/base.html" %}
{% load static %}

{% block title %}{{ movie.title }}{% endblock %}

{% block content %}
    <div class="container-kod-new row">
        <div class="block-movie-info row">
            <div class="block-movie-info-block row">
                <div class="block-movie-poster">
                    <h2 class="title">{{ movie.title }}</h2>
                    <img class="img-movie" src="{{ movie.medium_vertical_image }}" alt="">
                    <h5 class="score-star-container {% if score %}locked{% endif %}">
                        {% for i in '0123456789'|make_list %}
                            <i class="fa fa-star score-star"
                               style="color: {% if score and score.value >= forloop.counter %}gold{% else %}black{% endif %}"
                               aria-hidden="true"></i>
                        {% endfor %}
                    </h5>
                </div>
                <div class="block-movie-info-text">
                    <h3 class="title-smog">{{ movie.original_title }}</h3>
                    <h5>Год: {{ movie.year }}</h5>
                    <h5>Жанр: {{ movie.genres.all | join:", " }}</h5>
                    <h5>Категория: {{ movie.movie_type }}</h5>
                    {% if movie.countries %}
                        <h4>Страна: {{ movie.countries | join:", " }}</h4>
                    {% endif %}
                    <h5>Слоган: {{ movie.slogan }}</h5>
                    <h5>Бюджет: ${{ movie.budget }}</h5>
                    <h5>Режиссер:
                        {% for director in movie.directors %}
                            <a class="text-color-link" href="{% url "person.person_page" person_id=director.pk %}">
                                {{ director }}</a>{% if not forloop.last %}, {% endif %}
                        {% empty %}-
                        {% endfor %}
                    </h5>
                    <h5>Продюсер:
                        {% for producer in movie.producers %}
                            <a class="text-color-link" href="{% url "person.person_page" person_id=producer.pk %}">
                                {{ producer }}</a>{% if not forloop.last %}, {% endif %}
                        {% empty %}-
                        {% endfor %}
                    </h5>
                    <h5>Сценарист:
                        {% for writer in movie.writers %}
                            <a class="text-color-link" href="{% url "person.person_page" person_id=writer.pk %}">
                                {{ writer }}</a>{% if not forloop.last %}, {% endif %}
                        {% empty %}-
                        {% endfor %}
                    </h5>
                    <h5>Премьера Мир: {% if movie.premiere %}{{ movie.premiere }}{% else %}-{% endif %}</h5>
                    <h5>Премьера РФ: {% if movie.premiere_ru %}{{ movie.premiere_ru }}{% else %}-{% endif %}</h5>
                    <h5>Время: {{ movie.duration }}</h5>
                </div>
            </div>
            <div class="block-movie-statistic">
                <div class="rating">
                    <div class="rating-label {% if movie.average_score > 6.5 %}rating-green{% elif movie.average_score > 2.5 %}rating-orange{% else %}rating-red{% endif %}">
                        {{ movie.average_score }}
                    </div>
                    <div class="qty-rating">{{ movie.score_count }}</div>
                </div>
                <div class="container-actors">
                    <div class="container-actors-block">
                        {% for actor in movie.actors %}
                            <div class="actor-block">
                                <div class="row px-3">
                                    <div class="actor-info">
                                        <a class="actor-name"
                                           href="{% url "person.person_page" person_id=actor.person_id %}">{{ actor.person }}</a>
                                        <div class="actor-description text">{{ actor.role_name }}</div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <div class="row" style="margin: 0">
            <div class="container-trailer">
                <div class="container-trailer-block">
                    <div class="trailer-block">
                        <iframe width="327" height="184" src="https://www.youtube.com/embed/0ly25OYC45M" frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen></iframe>
                    </div>
                    <div class="trailer-block">
                        <iframe width="327" height="184" src="https://www.youtube.com/embed/0ly25OYC45M" frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen></iframe>
                    </div>
                    <div class="trailer-block">
                        <iframe width="327" height="184" src="https://www.youtube.com/embed/0ly25OYC45M" frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen></iframe>
                    </div>
                    <div class="trailer-block">
                        <iframe width="327" height="184" src="https://www.youtube.com/embed/0ly25OYC45M" frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen></iframe>
                    </div>
                    <div class="trailer-block">
                        <iframe width="327" height="184" src="https://www.youtube.com/embed/0ly25OYC45M" frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen></iframe>
                    </div>
                    <div class="trailer-block">
                        <iframe width="327" height="184" src="https://www.youtube.com/embed/0ly25OYC45M" frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen></iframe>
                    </div>
                    <div class="trailer-block">
                        <iframe width="327" height="184" src="https://www.youtube.com/embed/0ly25OYC45M" frameborder="0"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                allowfullscreen></iframe>
                    </div>
                </div>
            </div>
            <div class="container-main-trailer">
                <iframe width="720" height="480" src="https://www.youtube.com/embed/EqB72SBN1F8" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen></iframe>
            </div>
        </div>
        <div><h3 class="text-center">Рекомендуем к просмотру:</h3></div>
        <div class="container row">
            {% for recommendation in recommendations %}
                <div class="col-2">
                    <a href="{% url 'movies.movie_page' movie_id=recommendation.id %}"><img class="img-thumbnail m-2"
                                                                                            src="{{ recommendation.small_vertical_image }}"
                                                                                            alt=""></a>
                    <h5 class="text-center">{{ recommendation }}</h5>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block constants %}
    const urlForScore = '{% url "movies.score" movie_id=movie.id %}';
{% endblock %}
